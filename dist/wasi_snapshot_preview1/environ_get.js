import { getEnviron } from "../_private/environ.js";
import { ESUCCESS } from "../errno.js";
import { copyToWasm } from "../util/copy-to-wasm.js";
import { getPointerSize } from "../util/pointer.js";
import { writePointer } from "../util/write-pointer.js";
export function environ_get(environ, environBuffer) {
    const { strings } = getEnviron(this);
    let currentBufferPtr = environBuffer;
    let currentEnvironPtr = environ;
    for (const string of strings) {
        writePointer(this, currentEnvironPtr, currentBufferPtr);
        copyToWasm(this, currentBufferPtr, string);
        currentBufferPtr += string.byteLength + 1;
        currentEnvironPtr += getPointerSize(this);
    }
    return ESUCCESS;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW52aXJvbl9nZXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvd2FzaV9zbmFwc2hvdF9wcmV2aWV3MS9lbnZpcm9uX2dldC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDcEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN2QyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDckQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUd4RCxNQUFNLFVBQVUsV0FBVyxDQUF5QixPQUFlLEVBQUUsYUFBcUI7SUFDdEYsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUVyQyxJQUFJLGdCQUFnQixHQUFHLGFBQWEsQ0FBQztJQUNyQyxJQUFJLGlCQUFpQixHQUFHLE9BQU8sQ0FBQztJQUNoQyxLQUFLLE1BQU0sTUFBTSxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQzNCLFlBQVksQ0FBQyxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQUN4RCxVQUFVLENBQUMsSUFBSSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzNDLGdCQUFnQixJQUFJLE1BQU0sQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDO1FBQzFDLGlCQUFpQixJQUFJLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBRUQsT0FBTyxRQUFRLENBQUM7QUFDcEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEVudmlyb24gfSBmcm9tIFwiLi4vX3ByaXZhdGUvZW52aXJvbi5qc1wiO1xyXG5pbXBvcnQgeyBFU1VDQ0VTUyB9IGZyb20gXCIuLi9lcnJuby5qc1wiO1xyXG5pbXBvcnQgeyBjb3B5VG9XYXNtIH0gZnJvbSBcIi4uL3V0aWwvY29weS10by13YXNtLmpzXCI7XHJcbmltcG9ydCB7IGdldFBvaW50ZXJTaXplIH0gZnJvbSBcIi4uL3V0aWwvcG9pbnRlci5qc1wiO1xyXG5pbXBvcnQgeyB3cml0ZVBvaW50ZXIgfSBmcm9tIFwiLi4vdXRpbC93cml0ZS1wb2ludGVyLmpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSW5zdGFudGlhdGVkV2FzbSB9IGZyb20gXCIuLi93YXNtLmpzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW52aXJvbl9nZXQodGhpczogSW5zdGFudGlhdGVkV2FzbSwgZW52aXJvbjogbnVtYmVyLCBlbnZpcm9uQnVmZmVyOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgY29uc3QgeyBzdHJpbmdzIH0gPSBnZXRFbnZpcm9uKHRoaXMpO1xyXG5cclxuICAgIGxldCBjdXJyZW50QnVmZmVyUHRyID0gZW52aXJvbkJ1ZmZlcjtcclxuICAgIGxldCBjdXJyZW50RW52aXJvblB0ciA9IGVudmlyb247XHJcbiAgICBmb3IgKGNvbnN0IHN0cmluZyBvZiBzdHJpbmdzKSB7XHJcbiAgICAgICAgd3JpdGVQb2ludGVyKHRoaXMsIGN1cnJlbnRFbnZpcm9uUHRyLCBjdXJyZW50QnVmZmVyUHRyKTtcclxuICAgICAgICBjb3B5VG9XYXNtKHRoaXMsIGN1cnJlbnRCdWZmZXJQdHIsIHN0cmluZyk7XHJcbiAgICAgICAgY3VycmVudEJ1ZmZlclB0ciArPSBzdHJpbmcuYnl0ZUxlbmd0aCArIDE7XHJcbiAgICAgICAgY3VycmVudEVudmlyb25QdHIgKz0gZ2V0UG9pbnRlclNpemUodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIEVTVUNDRVNTO1xyXG59XHJcbiJdfQ==