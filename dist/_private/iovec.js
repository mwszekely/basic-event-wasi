import { getPointerSize } from "../util/pointer.js";
import { readPointer } from "../util/read-pointer.js";
import { readUint32 } from "../util/read-uint32.js";
export function parse(info, ptr) {
    return {
        bufferStart: readPointer(info, ptr),
        bufferLength: readUint32(info, ptr + getPointerSize(info))
    };
}
export function* parseArray(info, ptr, count) {
    const sizeofStruct = getPointerSize(info) + 4;
    for (let i = 0; i < count; ++i) {
        yield parse(info, ptr + (i * sizeofStruct));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW92ZWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvX3ByaXZhdGUvaW92ZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFRcEQsTUFBTSxVQUFVLEtBQUssQ0FBQyxJQUFzQixFQUFFLEdBQVc7SUFDckQsT0FBTztRQUNILFdBQVcsRUFBRSxXQUFXLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQztRQUNuQyxZQUFZLEVBQUUsVUFBVSxDQUFDLElBQUksRUFBRSxHQUFHLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzdELENBQUE7QUFDTCxDQUFDO0FBRUQsTUFBTSxTQUFTLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBc0IsRUFBRSxHQUFXLEVBQUUsS0FBYTtJQUMxRSxNQUFNLFlBQVksR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzlDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUM3QixNQUFNLEtBQUssQ0FBQyxJQUFJLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUE7SUFDL0MsQ0FBQztBQUNMLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRQb2ludGVyU2l6ZSB9IGZyb20gXCIuLi91dGlsL3BvaW50ZXIuanNcIjtcclxuaW1wb3J0IHsgcmVhZFBvaW50ZXIgfSBmcm9tIFwiLi4vdXRpbC9yZWFkLXBvaW50ZXIuanNcIjtcclxuaW1wb3J0IHsgcmVhZFVpbnQzMiB9IGZyb20gXCIuLi91dGlsL3JlYWQtdWludDMyLmpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSW5zdGFudGlhdGVkV2FzbSB9IGZyb20gXCIuLi93YXNtLmpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElvdmVjIHtcclxuICAgIGJ1ZmZlclN0YXJ0OiBudW1iZXI7XHJcbiAgICBidWZmZXJMZW5ndGg6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKGluZm86IEluc3RhbnRpYXRlZFdhc20sIHB0cjogbnVtYmVyKTogSW92ZWMge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBidWZmZXJTdGFydDogcmVhZFBvaW50ZXIoaW5mbywgcHRyKSxcclxuICAgICAgICBidWZmZXJMZW5ndGg6IHJlYWRVaW50MzIoaW5mbywgcHRyICsgZ2V0UG9pbnRlclNpemUoaW5mbykpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiogcGFyc2VBcnJheShpbmZvOiBJbnN0YW50aWF0ZWRXYXNtLCBwdHI6IG51bWJlciwgY291bnQ6IG51bWJlcik6IEdlbmVyYXRvcjxJb3ZlYywgdm9pZCwgdm9pZD4ge1xyXG4gICAgY29uc3Qgc2l6ZW9mU3RydWN0ID0gZ2V0UG9pbnRlclNpemUoaW5mbykgKyA0O1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XHJcbiAgICAgICAgeWllbGQgcGFyc2UoaW5mbywgcHRyICsgKGkgKiBzaXplb2ZTdHJ1Y3QpKVxyXG4gICAgfVxyXG59XHJcbiJdfQ==